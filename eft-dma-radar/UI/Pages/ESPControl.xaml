<UserControl x:Class="eft_dma_radar.UI.Pages.ESPControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:controls="clr-namespace:eft_dma_shared.Common.UI.Controls;assembly=eft-dma-shared"
             mc:Ignorable="d"
             d:DesignHeight="1500" d:DesignWidth="350"
             MinWidth="200" MinHeight="200">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header - Draggable area -->
        <Border x:Name="DragHandle" Grid.Row="0" Style="{StaticResource PanelHeader}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="ESP Settings" Style="{StaticResource PanelHeaderText}"/>

                <!-- Close button -->
                <Border Grid.Column="1" Style="{StaticResource CloseButtonBorder}">
                    <Button x:Name="btnCloseHeader" Style="{StaticResource CloseButton}"/>
                </Border>
            </Grid>
        </Border>

        <Grid Grid.Row="1">
            <Border Background="{DynamicResource RegionBrush}" 
                    CornerRadius="0,0,8,8"/>

            <hc:TabControl Style="{StaticResource TabControlInLine}"
                          HorizontalContentAlignment="Left"
                          Background="Transparent"
                          BorderThickness="0">

                <!-- Chams Tab -->
                <hc:TabItem Header="Chams">
                    <ScrollViewer Style="{StaticResource PanelScrollViewer}">
                        <hc:SimpleStackPanel>
                            <!-- General Settings Section -->
                            <Expander x:Name="expChamsGeneralSettings" Header="General Settings" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <!-- Enable Chams -->
                                    <CheckBox x:Name="chkEnableChams" Content="Enable Chams" 
                                              Style="{StaticResource DynamicCheckBoxStyle}" 
                                              Margin="0,0,0,15" Tag="EnableChams"/>

                                    <!-- Chams Material Management -->
                                    <GroupBox Header="Material Management" Style="{StaticResource TransparentGroupBoxStyle}"
                                              Padding="5,0,5,5" Margin="0,0,0,0">
                                        <hc:SimpleStackPanel Margin="0,5,0,0">
                                            <Grid Margin="0,0,0,8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0" Margin="0,0,0,0"
                                                           Text="Materials Status:"
                                                           Style="{StaticResource LabelText}"
                                                           FontSize="14"
                                                           VerticalAlignment="Center"/>

                                                <TextBlock x:Name="txtChamsMaterialStatus" 
                                                           Grid.Column="1" Margin="4,0,0,0"
                                                           Text="Unknown" 
                                                           Style="{StaticResource LabelText}"
                                                           FontSize="14"
                                                           VerticalAlignment="Center"/>

                                                <TextBlock x:Name="txtChamsMaterialCount" 
                                                           Grid.Column="2" Margin="0,0,0,0"
                                                           Text="0/0 loaded" 
                                                           Style="{StaticResource LabelText}"
                                                           FontSize="14"
                                                           VerticalAlignment="Center"/>
                                            </Grid>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <Button x:Name="btnRefreshChamsMaterials" 
                                                        Grid.Column="0"
                                                        Content="🔄 Refresh Materials" 
                                                        Style="{StaticResource ButtonWarning}"
                                                        HorizontalAlignment="Stretch"
                                                        ToolTip="Force refresh all chams materials. Use if materials failed to load properly."
                                                        Tag="RefreshChamsMaterials"/>

                                                <Button x:Name="btnClearChamsCache" 
                                                        Grid.Column="2"
                                                        Content="🗑️ Clear Cache" 
                                                        Style="{StaticResource ButtonDanger}"
                                                        HorizontalAlignment="Stretch"
                                                        ToolTip="Clear chams material cache and force full reload on next refresh."
                                                        Tag="ClearChamsCache"/>
                                            </Grid>
                                        </hc:SimpleStackPanel>
                                    </GroupBox>
                                </hc:SimpleStackPanel>
                            </Expander>

                            <!-- Entity Settings Section -->
                            <Expander x:Name="expChamsEntitySettings" Header="Entity Settings" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <!-- Entity Type Selection -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Entity Type" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>

                                        <hc:ComboBox x:Name="cboChamsEntityType" Grid.Column="1">
                                            <ComboBoxItem Content="AI" Tag="AI"/>
                                            <ComboBoxItem Content="Aimbot Target" Tag="AimBotTarget"/>
                                            <ComboBoxItem Content="Boss" Tag="Boss"/>
                                            <ComboBoxItem Content="Player Scav" Tag="PlayerScav"/>
                                            <ComboBoxItem Content="PMC" Tag="PMC"/>
                                            <ComboBoxItem Content="Raider/Rogue/Guard" Tag="Guard"/>
                                            <ComboBoxItem Content="Teammate" Tag="Teammate"/>
                                            <ComboBoxItem Content="Containers" Tag="Container"/>
                                            <ComboBoxItem Content="Important Items" Tag="ImportantItem"/>
                                            <ComboBoxItem Content="Quest Items" Tag="QuestItem"/>
                                        </hc:ComboBox>
                                    </Grid>

                                    <!-- Entity Enabled Checkbox -->
                                    <CheckBox x:Name="chkEntityEnabled" Content="Entity Chams" 
                                              Style="{StaticResource DynamicCheckBoxStyle}" 
                                              Margin="0,0,0,12" Tag="EntityEnabled"/>

                                    <!-- Material Type Selection -->
                                    <Grid x:Name="materialGroup" Margin="0,0,0,8" Visibility="Visible">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Material Type" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>

                                        <hc:ComboBox x:Name="cboMaterialType" Grid.Column="1" Tag="MaterialType">
                                            <ComboBoxItem Content="Basic" Tag="Basic" IsSelected="True"/>
                                            <ComboBoxItem Content="Visible" Tag="Visible"/>
                                            <ComboBoxItem Content="WireFrame" Tag="WireFrame"/>
                                            <ComboBoxItem Content="VisCheck Glow" Tag="VisCheckGlow"/>
                                            <ComboBoxItem Content="VisCheck Flat" Tag="VisCheckFlat"/>
                                        </hc:ComboBox>
                                    </Grid>

                                    <!-- Player Entity Material Types -->
                                    <GroupBox x:Name="playerEntityGroup" Header="Material Types" Style="{StaticResource TransparentGroupBoxStyle}"
                                              Padding="5,0,5,5" Margin="0,0,0,12" Visibility="Collapsed">
                                        <hc:SimpleStackPanel Margin="0,5,0,0">
                                            <!-- Clothing Chams -->
                                            <Grid Margin="0,0,0,8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="120"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <CheckBox x:Name="chkClothingChamsEnabled" Content="Clothing Chams" 
                                                          Style="{StaticResource DynamicCheckBoxStyle}" 
                                                          Grid.Column="0" Tag="ClothingChamsEnabled"
                                                          VerticalAlignment="Center"/>

                                                <hc:ComboBox x:Name="cboClothingMaterialType" Grid.Column="1" Tag="ClothingMaterialType">
                                                    <ComboBoxItem Content="Basic" Tag="Basic" IsSelected="True"/>
                                                    <ComboBoxItem Content="Visible" Tag="Visible"/>
                                                    <ComboBoxItem Content="WireFrame" Tag="WireFrame"/>
                                                    <ComboBoxItem Content="VisCheck Glow" Tag="VisCheckGlow"/>
                                                    <ComboBoxItem Content="VisCheck Flat" Tag="VisCheckFlat"/>
                                                </hc:ComboBox>
                                            </Grid>

                                            <!-- Gear Chams -->
                                            <Grid Margin="0,0,0,8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="120"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <CheckBox x:Name="chkGearChamsEnabled" Content="Gear Chams" 
                                                          Style="{StaticResource DynamicCheckBoxStyle}" 
                                                          Grid.Column="0" Tag="GearChamsEnabled"
                                                          VerticalAlignment="Center"/>

                                                <hc:ComboBox x:Name="cboGearMaterialType" Grid.Column="1" Tag="GearMaterialType">
                                                    <ComboBoxItem Content="Basic" Tag="Basic" IsSelected="True"/>
                                                    <ComboBoxItem Content="Visible" Tag="Visible"/>
                                                    <ComboBoxItem Content="WireFrame" Tag="WireFrame"/>
                                                    <ComboBoxItem Content="VisCheck Glow" Tag="VisCheckGlow"/>
                                                    <ComboBoxItem Content="VisCheck Flat" Tag="VisCheckFlat"/>
                                                </hc:ComboBox>
                                            </Grid>

                                            <!-- Death Material -->
                                            <Grid Margin="0,0,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="120"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <CheckBox x:Name="chkDeathMaterialEnabled" Content="Death Material" 
                                                          Style="{StaticResource DynamicCheckBoxStyle}" 
                                                          Grid.Column="0" Tag="DeathMaterialEnabled"
                                                          VerticalAlignment="Center"/>

                                                <hc:ComboBox x:Name="cboDeathMaterialType" Grid.Column="1" Tag="DeathMaterialType">
                                                    <ComboBoxItem Content="Basic" Tag="Basic"/>
                                                    <ComboBoxItem Content="Visible" Tag="Visible"/>
                                                    <ComboBoxItem Content="WireFrame" Tag="WireFrame"/>
                                                    <ComboBoxItem Content="VisCheck Glow" Tag="VisCheckGlow"/>
                                                    <ComboBoxItem Content="VisCheck Flat" Tag="VisCheckFlat" IsSelected="True"/>
                                                </hc:ComboBox>
                                            </Grid>
                                        </hc:SimpleStackPanel>
                                    </GroupBox>

                                    <!-- Material Color Selection -->
                                    <GroupBox x:Name="materialColorGroup" Header="Material Color Selection" Style="{StaticResource TransparentGroupBoxStyle}"
                                              Padding="5,0,5,5" Margin="0,0,0,12">
                                        <hc:SimpleStackPanel Margin="0,5,0,0">
                                            <Grid Margin="0,0,0,8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="120"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="Material Type" Style="{StaticResource LabelText}" 
                                                           VerticalAlignment="Center" Grid.Column="0"/>

                                                <hc:ComboBox x:Name="cboColorMaterialType" Grid.Column="1" Tag="ColorMaterialType">
                                                    <ComboBoxItem Content="WireFrame" Tag="WireFrame" IsSelected="True"/>
                                                    <ComboBoxItem Content="VisCheck Glow" Tag="VisCheckGlow"/>
                                                    <ComboBoxItem Content="VisCheck Flat" Tag="VisCheckFlat"/>
                                                </hc:ComboBox>
                                            </Grid>

                                            <!-- Colors -->
                                            <Grid Margin="0,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="20"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <TextBlock Text="Visible " Grid.Row="0" Grid.Column="0" 
                                                           Style="{StaticResource ColorPickerLabel}"/>
                                                <Button x:Name="btnChamsVisibleColor" Grid.Row="0" Grid.Column="1" Tag="VisibleColor"
                                                        Style="{StaticResource ColorPickerButtonPreserveColor}">
                                                    <Button.Background>
                                                        <SolidColorBrush x:Name="chamsVisibleColor" Color="Green"/>
                                                    </Button.Background>
                                                </Button>

                                                <TextBlock Text="Invisible Color" Grid.Row="0" Grid.Column="3" 
                                                           Style="{StaticResource ColorPickerLabel}"/>
                                                <Button x:Name="btnChamsInvisibleColor" Grid.Row="0" Grid.Column="4" Tag="InvisibleColor"
                                                        Style="{StaticResource ColorPickerButtonPreserveColor}">
                                                    <Button.Background>
                                                        <SolidColorBrush x:Name="chamsInvisibleColor" Color="Red"/>
                                                    </Button.Background>
                                                </Button>
                                            </Grid>
                                        </hc:SimpleStackPanel>
                                    </GroupBox>
                                </hc:SimpleStackPanel>
                            </Expander>
                        </hc:SimpleStackPanel>
                    </ScrollViewer>
                </hc:TabItem>

                <!-- Fuser Tab -->
                <hc:TabItem Header="Fuser">
                    <ScrollViewer Style="{StaticResource PanelScrollViewer}">
                        <hc:SimpleStackPanel>
                            <!-- Fuser Settings Section -->
                            <Expander x:Name="expFuserGeneralSettings" Header="General Settings" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <!-- Enable Fuser -->
                                    <Button x:Name="btnStartESP" Content="Start ESP" Tag="StartESP"
                                            HorizontalAlignment="Left" Margin="0,0,0,8"
                                                Style="{StaticResource ButtonPrimary}"/>

                                    <!-- Auto Fullscreen Checkbox -->
                                    <CheckBox x:Name="chkAutoFullscreen" Content="Auto Fullscreen" Tag="AutoFullscreen"
                                              Style="{StaticResource DynamicCheckBoxStyle}" 
                                              Margin="0,0,0,8"/>

                                    <!-- FPS Cap Slider -->
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="FPS Cap" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <hc:NumericUpDown x:Name="nudFPSCap" Value="60" Minimum="30" Maximum="500"
                                                          Grid.Column="1" Width="80" HorizontalAlignment="Left" Tag="FPSCap"/>
                                    </Grid>

                                    <!-- Font Scale Slider -->
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Font Scale" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <controls:TextValueSlider
                                            x:Name="sldrFuserFontScale" Tag="FuserFontScale"
                                            Minimum="0.5" Maximum="5"
                                            SmallChange="0.1" 
                                            TickFrequency="0.1"
                                            IsSnapToTickEnabled="True"
                                            ContentStringFormat="{}{0:0.0x}" 
                                            Grid.Column="1"/>
                                    </Grid>

                                    <!-- Line Scale Slider -->
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Line Scale" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <controls:TextValueSlider
                                                x:Name="sldrFuserLineScale" Tag="FuserLineScale"
                                                Minimum="0.5" Maximum="5"
                                                SmallChange="0.1" TickFrequency="0.1"
                                                IsSnapToTickEnabled="True"
                                                ContentStringFormat="{}{0:0.0x}" 
                                                Grid.Column="1"/>
                                    </Grid>

                                    <hc:CheckComboBox x:Name="ccbESPOptions" Grid.Column="1" Margin="0,0,0,0"
                                                      Style="{StaticResource CheckComboBoxExtend}"
                                                      hc:TitleElement.Title="Options"
                                                      hc:TitleElement.TitlePlacement="Top"
                                                      hc:InfoElement.Placeholder="Fireport Aim, Aimbot FOV, Status Text..."/>
                                </hc:SimpleStackPanel>
                            </Expander>

                            <!-- Render Settings Section -->
                            <Expander x:Name="expFuserCrosshairSettings" Header="Crosshair Settings" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <Grid Margin="5">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <CheckBox x:Name="chkCrosshairEnabled" Content="Enable Crosshair" 
                                                      Style="{StaticResource DynamicCheckBoxStyle}" 
                                                      Grid.Column="0" Margin="0,0,15,10" Tag="CrosshairEnabled"/>

                                        <hc:ComboBox x:Name="cboCrosshairType" Grid.Column="1" Tag="CrosshairType" Margin="0,0,0,10"
                                                         IsEnabled="{Binding ElementName=chkCrosshairEnabled, Path=IsChecked}">
                                            <ComboBoxItem Content="Plus (+)" IsSelected="True"/>
                                            <ComboBoxItem Content="Cross (X)"/>
                                            <ComboBoxItem Content="Circle"/>
                                            <ComboBoxItem Content="Dot"/>
                                            <ComboBoxItem Content="Square"/>
                                            <ComboBoxItem Content="Diamond"/>
                                        </hc:ComboBox>

                                        <!-- Crosshair Scale Slider -->
                                        <TextBlock Text="Crosshair Scale" Style="{StaticResource LabelText}" VerticalAlignment="Center" Grid.Column="0" Grid.Row="1"/>
                                        <controls:TextValueSlider
                                                x:Name="sldrFuserCrosshairScale" Tag="FuserCrosshairScale"
                                                Minimum="0.5" Maximum="5"
                                                SmallChange="0.1" TickFrequency="0.1"
                                                IsSnapToTickEnabled="True"
                                                ContentStringFormat="{}{0:0.0x}" 
                                                Grid.Column="1" Grid.Row="1"/>
                                    </Grid>
                                </hc:SimpleStackPanel>
                            </Expander>

                            <!-- Player Information Expander -->
                            <Expander x:Name="expFuserPlayerInformation" Header="Player Information" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <!-- Player Type Selection -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Player Type" Style="{StaticResource LabelText}" VerticalAlignment="Center"/>
                                        <hc:ComboBox x:Name="cboFuserPlayerType" Grid.Column="1" Tag="FuserPlayerType"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <CheckBox x:Name="chkHighAlert" Content="High Alert Indicator" Tag="HighAlertIndicator"
                                              Margin="0,0,0,10" Grid.Column="0"
                                              Style="{StaticResource DynamicCheckBoxStyle}"/>

                                        <CheckBox x:Name="chkImportantIndicators" Content="Important Indicator" Tag="ImportantIndicators"
                                              Margin="0,0,0,10" Grid.Column="1"
                                              Style="{StaticResource DynamicCheckBoxStyle}"/>
                                    </Grid>

                                    <!-- Max Render Distance -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Render Distance" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <controls:TextValueSlider
                                                x:Name="sldrPlayerTypeRenderDistance" Tag="PlayerTypeRenderDistance"
                                                Minimum="0" Maximum="1500"
                                                MinContent="Off" MaxContent="Max"
                                                SmallChange="1" TickFrequency="1"
                                                IsSnapToTickEnabled="True"
                                                ContentStringFormat="{}{0:0m}" 
                                                Grid.Column="1"/>
                                    </Grid>

                                    <!-- Render Mode Selection -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Render Mode" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <hc:ComboBox x:Name="cboPlayerRenderMode" Grid.Column="1" Tag="PlayerRenderMode">
                                            <ComboBoxItem Content="None"/>
                                            <ComboBoxItem Content="Bones" IsSelected="True"/>
                                            <ComboBoxItem Content="Box"/>
                                            <ComboBoxItem Content="Head Dot"/>
                                        </hc:ComboBox>
                                    </Grid>

                                    <!-- Information Selection -->
                                    <hc:CheckComboBox x:Name="ccbFuserPlayerInformation" Grid.Column="1" Margin="0,0,0,0"
                                                          Style="{StaticResource CheckComboBoxExtend}"
                                                          hc:TitleElement.Title="Information"
                                                          hc:TitleElement.TitlePlacement="Top"
                                                          hc:InfoElement.Placeholder="Name, Health, Distance, Weapon..."/>
                                </hc:SimpleStackPanel>
                            </Expander>

                            <!-- Entity Information Expander -->
                            <Expander x:Name="expFuserEntityInformation" Header="Entity Information" Style="{StaticResource PanelExpander}" IsExpanded="True">
                                <hc:SimpleStackPanel Style="{StaticResource ExpanderContent}" Margin="2,8,2,0">
                                    <!-- Entity Type Selection -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Entity Type" Style="{StaticResource LabelText}" VerticalAlignment="Center"/>
                                        <hc:ComboBox x:Name="cboFuserEntityType" Grid.Column="1" Tag="FuserEntityType"/>
                                    </Grid>

                                    <hc:SimpleStackPanel x:Name="entitySpecificSettings" Margin="0,0,0,0">
                                        <!-- Door Settings -->
                                        <Grid x:Name="doorSettings" Visibility="Collapsed">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="chkShowLockedDoors" Content="Show Locked" Tag="ShowLockedDoors"
                                                      Style="{StaticResource DynamicCheckBoxStyle}" Grid.Column="0" Margin="0,0,5,8"/>
                                            <CheckBox x:Name="chkShowUnlockedDoors" Content="Show Unlocked" Tag="ShowUnlockedDoors"
                                                      Style="{StaticResource DynamicCheckBoxStyle}" Grid.Column="1" Margin="0,0,5,8"/>
                                        </Grid>

                                        <!-- Tripwire Settings -->
                                        <Grid x:Name="tripwireSettings" Visibility="Collapsed">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="chkShowTripwireLine" Content="Show Tripwire Line" Tag="ShowTripwireLine"
                                                      Style="{StaticResource DynamicCheckBoxStyle}" Grid.Column="0" Margin="0,0,5,8"/>
                                        </Grid>

                                        <!-- Grenade Settings -->
                                        <Grid x:Name="grenadeSettings" Visibility="Collapsed">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <CheckBox x:Name="chkShowGrenadeRadius" Content="Show Radius" Tag="ShowGrenadeRadius"
                                                      Style="{StaticResource DynamicCheckBoxStyle}" Grid.Column="0" Margin="0,0,5,8"/>
                                        </Grid>
                                    </hc:SimpleStackPanel>

                                    <!-- Render Mode -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Render Mode" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <hc:ComboBox x:Name="cboEntityRenderMode" Grid.Column="1" Tag="EntityRenderMode">
                                            <ComboBoxItem Content="None"/>
                                            <ComboBoxItem Content="Dot"/>
                                            <ComboBoxItem Content="Cross"/>
                                            <ComboBoxItem Content="Plus"/>
                                            <ComboBoxItem Content="Square" IsSelected="True"/>
                                            <ComboBoxItem Content="Diamond"/>
                                        </hc:ComboBox>
                                    </Grid>

                                    <!-- Render Distance -->
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Render Distance" Style="{StaticResource LabelText}" 
                                                   VerticalAlignment="Center" Grid.Column="0"/>
                                        <controls:TextValueSlider
                                            x:Name="sldrEntityTypeRenderDistance" Tag="EntityTypeRenderDistance"
                                            Minimum="0" Maximum="1500"
                                            MinContent="Off" MaxContent="Max"
                                            SmallChange="1" TickFrequency="1"
                                            IsSnapToTickEnabled="True"
                                            ContentStringFormat="{}{0:0m}" 
                                            Grid.Column="1"/>
                                    </Grid>

                                    <!-- Information Selection -->
                                    <hc:CheckComboBox x:Name="ccbFuserEntityInformation" Grid.Column="1" Margin="0,0,0,0"
                                                      Style="{StaticResource CheckComboBoxExtend}"
                                                      hc:TitleElement.Title="Information"
                                                      hc:TitleElement.TitlePlacement="Top"
                                                      hc:InfoElement.Placeholder="Name, Distance, Value..."/>
                                </hc:SimpleStackPanel>
                            </Expander>
                        </hc:SimpleStackPanel>
                    </ScrollViewer>
                </hc:TabItem>
            </hc:TabControl>

            <!-- Resize handle -->
            <Grid Style="{StaticResource ResizeHandle}"
                  MouseLeftButtonDown="ResizeHandle_MouseLeftButtonDown">
                <Path Style="{StaticResource ResizeHandleIcon}"/>
            </Grid>
        </Grid>
    </Grid>
</UserControl>